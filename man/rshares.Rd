% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rshares.R
\name{rshares}
\alias{rshares}
\title{Generate random shares that always sum to 1}
\usage{
rshares(
  n,
  shares,
  sds = NULL,
  na_action = "fill",
  max_iter = 1000,
  max_rel_bias = 0.1,
  ...
)
}
\arguments{
\item{n}{Integer. Sample size.}

\item{shares}{Numeric vector containing a best-guess (mean) values for the shares.
May contain \code{NA}, which is handled depending on \code{na_action}. Must sum to 1
after adjustment.}

\item{sds}{Numeric vector (same length as \code{shares}) for the standard deviations of
the shares. Can also contain \code{NA}.}

\item{na_action}{Character. Either \code{"fill"} (default) to fill \code{NA} shares
proportionally, or \code{"remove"} to drop them entirely.}

\item{max_iter}{Numeric. Used by \code{\link[=rbeta2]{rbeta2()}} if partial Beta sampling is performed
(not used here unless you modify the source).}

\item{max_rel_bias}{Numeric scalar in (0, 1).  Maximum \emph{relative} deviation
that the internal momentâ€“matching routine is allowed to have between the
requested means in \code{shares} and the theoretical means implied by the
fitted (generalised) Dirichlet parameters.  It is computed as
\code{max(abs(mu_target - mu_fitted) / mu_target)} across all components. Defaults to 0.1.}

\item{...}{Additional arguments passed on to \code{\link[=rbeta2]{rbeta2()}} or other internal functions.}
}
\value{
A numeric matrix of dimension \code{n} times \code{length(shares)}, with
each row summing to 1.
}
\description{
This function combines different approaches for generating shares (Dirichlet,
Generalised Dirichlet, Beta) in a single workflow, depending on the information
provided by \code{shares} and \code{sds}. All generated vectors sum to 1.
}
\details{
The logic is:
\enumerate{
\item If both mean and SD are available for \strong{all} shares, use \code{\link[=rdirichlet_generalised]{rdirichlet_generalised()}}.
\item If only mean values (no SDs) are available for \strong{all} shares, use \code{\link[=rdirichlet_maxent]{rdirichlet_maxent()}}.
\item If partial information in the mean values is present (i.e. there are \code{NA}'s in \code{shares})
the output depends on \code{na_action}: By default, if \code{na_action} is "fill", any \code{NA} in \code{shares} is replaced
proportionally so that the new \code{shares} still sum to 1. If \code{na_action} is "remove",
elements with \code{NA} are dropped.
\item Otherwise, throw an error if partial information is present (e.g., some but not all
SDs are defined).
}
}
\examples{
# Example with no SDs -> uses rdirichlet_maxent
rshares(5, c(0.1, 0.3, 0.6))

# Example with means & SDs for all -> uses rdirichlet_generalised
rshares(5, c(0.1, 0.3, 0.6), c(0.05, 0.07, 0.02))

# 'na_action' example: fill missing shares to sum to 1
rshares(5, c(NA, 0.2, 0.3) , na_action = "fill")
}
\seealso{
\code{\link[=rdirichlet_generalised]{rdirichlet_generalised()}}, \code{\link[=rdirichlet_maxent]{rdirichlet_maxent()}}, \code{\link[=rbeta2]{rbeta2()}}
}
